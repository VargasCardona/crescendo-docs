<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diseño de Bases de Datos - Crescendo</title>
    <link rel="stylesheet" href="styles_extra.css">
    <link rel="stylesheet" href="styles_db.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header Navigation -->
    <header class="header">
        <nav class="navbar">
            <div class="container">
                <div class="nav-content">
                    <div class="nav-brand">
                        <a href="index.html" class="brand-link">
                            <span class="gradient-text">Crescendo</span>
                        </a>
                    </div>
                    
                    <div class="nav-menu" id="navMenu">
                        <ul class="nav-list">
                            <li class="nav-item">
                                <a href="index.html" class="nav-link">Inicio</a>
                            </li>
                            <li class="nav-item">
                                <a href="diseno-alto-nivel.html" class="nav-link">Diseño de Alto Nivel</a>
                            </li>
                            <li class="nav-item">
                                <a href="diseno-bajo-nivel.html" class="nav-link">Diseño de Bajo Nivel</a>
                            </li>
                            <li class="nav-item">
                                <a href="diseno-bases-datos.html" class="nav-link active">Diseño de Bases de Datos</a>
                            </li>
                        </ul>
                        <div class="nav-cta">
                            <a href="#" class="btn btn-primary-small">
                                <span>Demo</span>
                                <i class="fas fa-external-link-alt"></i>
                            </a>
                        </div>
                    </div>

                    <div class="nav-toggle" id="navToggle">
                        <span class="hamburger"></span>
                        <span class="hamburger"></span>
                        <span class="hamburger"></span>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Page Hero -->
    <section class="page-hero">
        <div class="container">
            <div class="page-hero-content">
                <div class="breadcrumb">
                    <a href="index.html">Inicio</a>
                    <i class="fas fa-chevron-right"></i>
                    <span>Diseño de Bases de Datos</span>
                </div>
                <h1 class="gradient-text">Diseño de Bases de Datos</h1>
                <p>Diseño lógico, modelo entidad-relación, scripts y sistema de auditoría de la base de datos</p>
            </div>
        </div>
    </section>

    <!-- Content Section -->
    <section class="content-section">
        <div class="container">
            <div class="content-grid">
                <div class="content-main">
                    <!-- Diseño Lógico -->
                    <div class="content-card" id="diseno-logico">
                        <h2><i class="fas fa-sitemap"></i> Diseño Lógico</h2>
                        <p>El diseño lógico de la base de datos define la estructura conceptual de los datos, las relaciones entre entidades y las reglas de negocio que rigen el sistema.</p>
                        
                        <div class="logical-design">
                            <div class="design-principles">
                                <h3>Principios del Diseño</h3>
                                <div class="principles-grid">
                                    <div class="principle-card">
                                        <div class="principle-icon">
                                            <i class="fas fa-database"></i>
                                        </div>
                                        <h4>Normalización</h4>
                                        <p>Base de datos normalizada hasta la tercera forma normal (3NF) para eliminar redundancias y garantizar integridad de datos.</p>
                                        <ul>
                                            <li>Primera Forma Normal: Eliminación de grupos repetitivos</li>
                                            <li>Segunda Forma Normal: Eliminación de dependencias parciales</li>
                                            <li>Tercera Forma Normal: Eliminación de dependencias transitivas</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="principle-card">
                                        <div class="principle-icon">
                                            <i class="fas fa-shield-alt"></i>
                                        </div>
                                        <h4>Integridad Referencial</h4>
                                        <p>Implementación de restricciones de integridad para mantener la consistencia de los datos.</p>
                                        <ul>
                                            <li>Claves primarias únicas en todas las tablas</li>
                                            <li>Claves foráneas con restricciones CASCADE</li>
                                            <li>Restricciones CHECK para validación de datos</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="principle-card">
                                        <div class="principle-icon">
                                            <i class="fas fa-tachometer-alt"></i>
                                        </div>
                                        <h4>Optimización</h4>
                                        <p>Diseño optimizado para consultas frecuentes y operaciones de alto volumen.</p>
                                        <ul>
                                            <li>Índices estratégicos en columnas de búsqueda</li>
                                            <li>Particionamiento de tablas grandes</li>
                                            <li>Desnormalización controlada para reportes</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="principle-card">
                                        <div class="principle-icon">
                                            <i class="fas fa-expand-arrows-alt"></i>
                                        </div>
                                        <h4>Escalabilidad</h4>
                                        <p>Estructura preparada para crecimiento futuro y aumento de volumen de datos.</p>
                                        <ul>
                                            <li>Diseño modular y extensible</li>
                                            <li>Soporte para replicación</li>
                                            <li>Estrategias de archivado de datos históricos</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="data-domains">
                                <h3>Dominios de Datos</h3>
                                <div class="domains-grid">
                                    <div class="domain-card">
                                        <h4><i class="fas fa-users"></i> Dominio de Cotizantes</h4>
                                        <p>Gestión de información personal y financiera de los cotizantes.</p>
                                        <div class="domain-entities">
                                            <span class="entity-tag">Cotizantes</span>
                                            <span class="entity-tag">HistorialTraspasos</span>
                                            <span class="entity-tag">DatosFinancieros</span>
                                        </div>
                                    </div>
                                    
                                    <div class="domain-card">
                                        <h4><i class="fas fa-ban"></i> Dominio de Embargos</h4>
                                        <p>Control y seguimiento de embargos y restricciones legales.</p>
                                        <div class="domain-entities">
                                            <span class="entity-tag">Embargos</span>
                                            <span class="entity-tag">EntidadesEmbargantes</span>
                                            <span class="entity-tag">TiposEmbargo</span>
                                        </div>
                                    </div>
                                    
                                    <div class="domain-card">
                                        <h4><i class="fas fa-exchange-alt"></i> Dominio de Traspasos</h4>
                                        <p>Procesamiento y seguimiento de operaciones de traspaso.</p>
                                        <div class="domain-entities">
                                            <span class="entity-tag">Traspasos</span>
                                            <span class="entity-tag">EstadosTraspasos</span>
                                            <span class="entity-tag">ColaPrioridad</span>
                                        </div>
                                    </div>
                                    
                                    <div class="domain-card">
                                        <h4><i class="fas fa-clipboard-list"></i> Dominio de Auditoría</h4>
                                        <p>Registro y trazabilidad de todas las operaciones del sistema.</p>
                                        <div class="domain-entities">
                                            <span class="entity-tag">LogsAuditoria</span>
                                            <span class="entity-tag">OperacionesSistema</span>
                                            <span class="entity-tag">EventosSistema</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Diagrama Entidad-Relación -->
                    <div class="content-card" id="diagrama-er">
                        <h2><i class="fas fa-project-diagram"></i> Diagrama Entidad-Relación</h2>
                        <p>El modelo entidad-relación representa la estructura lógica de la base de datos, mostrando las entidades, atributos y relaciones del sistema Crescendo.</p>
                        
                        <div class="er-diagram">
                            <div class="entity-container">
                                <div class="entity-box primary-entity">
                                    <div class="entity-header">
                                        <h3><i class="fas fa-user"></i> COTIZANTES</h3>
                                    </div>
                                    <div class="entity-attributes">
                                        <div class="attribute primary-key">
                                            <i class="fas fa-key"></i>
                                            <span>id_cotizante (PK)</span>
                                            <span class="data-type">VARCHAR(20)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>numero_documento</span>
                                            <span class="data-type">VARCHAR(15)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>tipo_documento</span>
                                            <span class="data-type">ENUM</span>
                                        </div>
                                        <div class="attribute">
                                            <span>nombre_completo</span>
                                            <span class="data-type">VARCHAR(100)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>fecha_nacimiento</span>
                                            <span class="data-type">DATE</span>
                                        </div>
                                        <div class="attribute">
                                            <span>edad</span>
                                            <span class="data-type">INT GENERATED</span>
                                        </div>
                                        <div class="attribute">
                                            <span>genero</span>
                                            <span class="data-type">ENUM</span>
                                        </div>
                                        <div class="attribute">
                                            <span>telefono</span>
                                            <span class="data-type">VARCHAR(15)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>email</span>
                                            <span class="data-type">VARCHAR(100)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>direccion</span>
                                            <span class="data-type">TEXT</span>
                                        </div>
                                        <div class="attribute">
                                            <span>ciudad</span>
                                            <span class="data-type">VARCHAR(50)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>tiempo_fondo_privado</span>
                                            <span class="data-type">INT</span>
                                        </div>
                                        <div class="attribute">
                                            <span>historial_deudas</span>
                                            <span class="data-type">BOOLEAN</span>
                                        </div>
                                        <div class="attribute">
                                            <span>estado_traspaso</span>
                                            <span class="data-type">ENUM</span>
                                        </div>
                                        <div class="attribute">
                                            <span>fecha_registro</span>
                                            <span class="data-type">TIMESTAMP</span>
                                        </div>
                                        <div class="attribute">
                                            <span>fecha_actualizacion</span>
                                            <span class="data-type">TIMESTAMP</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="entity-box">
                                    <div class="entity-header">
                                        <h3><i class="fas fa-ban"></i> EMBARGOS</h3>
                                    </div>
                                    <div class="entity-attributes">
                                        <div class="attribute primary-key">
                                            <i class="fas fa-key"></i>
                                            <span>id_embargo (PK)</span>
                                            <span class="data-type">VARCHAR(20)</span>
                                        </div>
                                        <div class="attribute foreign-key">
                                            <i class="fas fa-link"></i>
                                            <span>id_cotizante (FK)</span>
                                            <span class="data-type">VARCHAR(20)</span>
                                        </div>
                                        <div class="attribute foreign-key">
                                            <i class="fas fa-link"></i>
                                            <span>id_entidad_embargante (FK)</span>
                                            <span class="data-type">INT</span>
                                        </div>
                                        <div class="attribute">
                                            <span>numero_proceso</span>
                                            <span class="data-type">VARCHAR(50)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>tipo_embargo</span>
                                            <span class="data-type">VARCHAR(50)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>monto_embargo</span>
                                            <span class="data-type">DECIMAL(15,2)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>porcentaje_embargo</span>
                                            <span class="data-type">DECIMAL(5,2)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>fecha_embargo</span>
                                            <span class="data-type">DATE</span>
                                        </div>
                                        <div class="attribute">
                                            <span>fecha_vencimiento</span>
                                            <span class="data-type">DATE</span>
                                        </div>
                                        <div class="attribute">
                                            <span>estado_embargo</span>
                                            <span class="data-type">ENUM</span>
                                        </div>
                                        <div class="attribute">
                                            <span>observaciones</span>
                                            <span class="data-type">TEXT</span>
                                        </div>
                                        <div class="attribute">
                                            <span>fecha_registro</span>
                                            <span class="data-type">TIMESTAMP</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="entity-box">
                                    <div class="entity-header">
                                        <h3><i class="fas fa-building"></i> ENTIDADES_EMBARGANTES</h3>
                                    </div>
                                    <div class="entity-attributes">
                                        <div class="attribute primary-key">
                                            <i class="fas fa-key"></i>
                                            <span>id_entidad (PK)</span>
                                            <span class="data-type">INT AUTO_INCREMENT</span>
                                        </div>
                                        <div class="attribute">
                                            <span>nombre_entidad</span>
                                            <span class="data-type">VARCHAR(100)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>tipo_entidad</span>
                                            <span class="data-type">ENUM</span>
                                        </div>
                                        <div class="attribute">
                                            <span>nit</span>
                                            <span class="data-type">VARCHAR(15)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>direccion</span>
                                            <span class="data-type">TEXT</span>
                                        </div>
                                        <div class="attribute">
                                            <span>telefono</span>
                                            <span class="data-type">VARCHAR(15)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>email_contacto</span>
                                            <span class="data-type">VARCHAR(100)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>activa</span>
                                            <span class="data-type">BOOLEAN</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="entity-box">
                                    <div class="entity-header">
                                        <h3><i class="fas fa-exchange-alt"></i> TRASPASOS</h3>
                                    </div>
                                    <div class="entity-attributes">
                                        <div class="attribute primary-key">
                                            <i class="fas fa-key"></i>
                                            <span>id_traspaso (PK)</span>
                                            <span class="data-type">VARCHAR(20)</span>
                                        </div>
                                        <div class="attribute foreign-key">
                                            <i class="fas fa-link"></i>
                                            <span>id_cotizante (FK)</span>
                                            <span class="data-type">VARCHAR(20)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>numero_solicitud</span>
                                            <span class="data-type">VARCHAR(30)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>fecha_solicitud</span>
                                            <span class="data-type">TIMESTAMP</span>
                                        </div>
                                        <div class="attribute">
                                            <span>fecha_procesamiento</span>
                                            <span class="data-type">TIMESTAMP</span>
                                        </div>
                                        <div class="attribute">
                                            <span>fecha_completado</span>
                                            <span class="data-type">TIMESTAMP</span>
                                        </div>
                                        <div class="attribute">
                                            <span>estado_traspaso</span>
                                            <span class="data-type">ENUM</span>
                                        </div>
                                        <div class="attribute">
                                            <span>prioridad</span>
                                            <span class="data-type">INT</span>
                                        </div>
                                        <div class="attribute">
                                            <span>motivo_rechazo</span>
                                            <span class="data-type">TEXT</span>
                                        </div>
                                        <div class="attribute">
                                            <span>monto_traspaso</span>
                                            <span class="data-type">DECIMAL(15,2)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>usuario_procesamiento</span>
                                            <span class="data-type">VARCHAR(50)</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="entity-box">
                                    <div class="entity-header">
                                        <h3><i class="fas fa-clipboard-list"></i> LOGS_AUDITORIA</h3>
                                    </div>
                                    <div class="entity-attributes">
                                        <div class="attribute primary-key">
                                            <i class="fas fa-key"></i>
                                            <span>id_log (PK)</span>
                                            <span class="data-type">BIGINT AUTO_INCREMENT</span>
                                        </div>
                                        <div class="attribute">
                                            <span>timestamp</span>
                                            <span class="data-type">TIMESTAMP</span>
                                        </div>
                                        <div class="attribute">
                                            <span>id_cotizante</span>
                                            <span class="data-type">VARCHAR(20)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>id_traspaso</span>
                                            <span class="data-type">VARCHAR(20)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>operacion</span>
                                            <span class="data-type">VARCHAR(50)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>resultado</span>
                                            <span class="data-type">VARCHAR(20)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>detalles</span>
                                            <span class="data-type">JSON</span>
                                        </div>
                                        <div class="attribute">
                                            <span>ip_origen</span>
                                            <span class="data-type">VARCHAR(45)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>usuario_sistema</span>
                                            <span class="data-type">VARCHAR(50)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>duracion_ms</span>
                                            <span class="data-type">INT</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="entity-box">
                                    <div class="entity-header">
                                        <h3><i class="fas fa-cog"></i> CONFIGURACION_SISTEMA</h3>
                                    </div>
                                    <div class="entity-attributes">
                                        <div class="attribute primary-key">
                                            <i class="fas fa-key"></i>
                                            <span>id_config (PK)</span>
                                            <span class="data-type">INT AUTO_INCREMENT</span>
                                        </div>
                                        <div class="attribute">
                                            <span>clave_configuracion</span>
                                            <span class="data-type">VARCHAR(100)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>valor_configuracion</span>
                                            <span class="data-type">TEXT</span>
                                        </div>
                                        <div class="attribute">
                                            <span>tipo_dato</span>
                                            <span class="data-type">ENUM</span>
                                        </div>
                                        <div class="attribute">
                                            <span>descripcion</span>
                                            <span class="data-type">TEXT</span>
                                        </div>
                                        <div class="attribute">
                                            <span>categoria</span>
                                            <span class="data-type">VARCHAR(50)</span>
                                        </div>
                                        <div class="attribute">
                                            <span>modificable</span>
                                            <span class="data-type">BOOLEAN</span>
                                        </div>
                                        <div class="attribute">
                                            <span>fecha_actualizacion</span>
                                            <span class="data-type">TIMESTAMP</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="relationships-section">
                                <h3>Relaciones del Modelo</h3>
                                <div class="relationships-grid">
                                    <div class="relationship-card">
                                        <h4>COTIZANTES ↔ EMBARGOS</h4>
                                        <div class="relationship-details">
                                            <span class="relationship-type">1:N</span>
                                            <p>Un cotizante puede tener múltiples embargos activos</p>
                                            <div class="relationship-rules">
                                                <span>ON DELETE: CASCADE</span>
                                                <span>ON UPDATE: CASCADE</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="relationship-card">
                                        <h4>COTIZANTES ↔ TRASPASOS</h4>
                                        <div class="relationship-details">
                                            <span class="relationship-type">1:N</span>
                                            <p>Un cotizante puede tener múltiples traspasos en el tiempo</p>
                                            <div class="relationship-rules">
                                                <span>ON DELETE: RESTRICT</span>
                                                <span>ON UPDATE: CASCADE</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="relationship-card">
                                        <h4>ENTIDADES_EMBARGANTES ↔ EMBARGOS</h4>
                                        <div class="relationship-details">
                                            <span class="relationship-type">1:N</span>
                                            <p>Una entidad puede generar múltiples embargos</p>
                                            <div class="relationship-rules">
                                                <span>ON DELETE: RESTRICT</span>
                                                <span>ON UPDATE: CASCADE</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="relationship-card">
                                        <h4>TRASPASOS ↔ LOGS_AUDITORIA</h4>
                                        <div class="relationship-details">
                                            <span class="relationship-type">1:N</span>
                                            <p>Cada traspaso genera múltiples registros de auditoría</p>
                                            <div class="relationship-rules">
                                                <span>Relación lógica</span>
                                                <span>Sin FK física</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Scripts -->
                    <div class="content-card" id="scripts">
                        <h2><i class="fas fa-code"></i> Scripts de Base de Datos</h2>
                        <p>Scripts SQL para la creación, configuración y mantenimiento de la base de datos del sistema Crescendo.</p>
                        
                        <div class="sql-scripts">
                            <div class="script-section">
                                <h3>Script de Creación de Base de Datos</h3>
                                <div class="code-block">
                                    <pre><code>-- Creación de la base de datos
CREATE DATABASE crescendo_db
CHARACTER SET utf8mb4
COLLATE utf8mb4_unicode_ci;

USE crescendo_db;

-- Configuración de zona horaria
SET time_zone = '-05:00'; -- Colombia

-- Configuración de modo SQL
SET sql_mode = 'STRICT_TRANS_TABLES,NO_ZERO_DATE,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO';</code></pre>
                                </div>
                            </div>

                            <div class="script-section">
                                <h3>Creación de Tablas Principales</h3>
                                <div class="code-block">
                                    <pre><code>-- Tabla de Entidades Embargantes
CREATE TABLE entidades_embargantes (
    id_entidad INT AUTO_INCREMENT PRIMARY KEY,
    nombre_entidad VARCHAR(100) NOT NULL,
    tipo_entidad ENUM('JUDICIAL', 'FISCAL', 'ADMINISTRATIVO', 'COOPERATIVO') NOT NULL,
    nit VARCHAR(15) UNIQUE NOT NULL,
    direccion TEXT,
    telefono VARCHAR(15),
    email_contacto VARCHAR(100),
    activa BOOLEAN DEFAULT TRUE,
    fecha_registro TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_tipo_entidad (tipo_entidad),
    INDEX idx_activa (activa)
);

-- Tabla de Cotizantes
CREATE TABLE cotizantes (
    id_cotizante VARCHAR(20) PRIMARY KEY,
    numero_documento VARCHAR(15) UNIQUE NOT NULL,
    tipo_documento ENUM('CC', 'CE', 'TI', 'PP', 'NIT') NOT NULL DEFAULT 'CC',
    nombre_completo VARCHAR(100) NOT NULL,
    fecha_nacimiento
